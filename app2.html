<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMPLOYMENT CORNER - FERNANDINO! Tara Magobra</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* All previous CSS remains the same */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        .app-container {
            background: white;
            min-height: 100vh;
            padding-bottom: 70px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        }
        
        .header {
            background: linear-gradient(to right, #51aee4, #4555e7);
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .logo {
            font-size: 22px;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
        }
        
        .header-icons i {
            margin-left: 15px;
            font-size: 20px;
            cursor: pointer;
        }
        
        /* ... (all other CSS styles remain exactly the same) ... */
        
        /* SMS/Email Integration Styles */
        .integration-status {
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
            font-weight: 600;
        }
        
        .integration-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .integration-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .integration-loading {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .test-credentials {
            background: #e7f3ff;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            font-size: 12px;
        }
        
        .test-credentials h4 {
            margin-bottom: 5px;
            color: #0066cc;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- All HTML structure remains the same until the interview scheduling view -->
        
        <!-- Interview Scheduling View (Editable) -->
        <div id="interview-scheduling-view" class="hidden">
            <div class="page-header">
                <div class="back-btn" onclick="goBack()">
                    <i class="fas fa-arrow-left"></i>
                </div>
                <div class="logo">
                    <span>Schedule Interview</span>
                </div>
            </div>
            
            <div class="interview-form">
                <div class="test-credentials">
                    <h4>Test Credentials (Use these for testing):</h4>
                    <p><strong>Phone:</strong> +63XXXXXXXXX (Any Philippine number format)</p>
                    <p><strong>Email:</strong> Any valid email address</p>
                    <p><em>Note: In demo mode, messages are logged to console. For real sending, you would need to set up API credentials.</em></p>
                </div>
                
                <div class="form-section">
                    <div class="form-section-title">Interview Details</div>
                    
                    <div class="form-group">
                        <label>Applicant Name</label>
                        <input type="text" id="interview-applicant" value="Maria Santos" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label>Phone Number *</label>
                        <input type="text" id="interview-phone" value="+639123456789" placeholder="+63 XXX XXX XXXX">
                        <small style="color: #666;">Format: +63 followed by 10 digits</small>
                    </div>
                    
                    <div class="form-group">
                        <label>Email Address *</label>
                        <input type="email" id="interview-email" value="test@example.com" placeholder="applicant@email.com">
                    </div>
                    
                    <div class="form-group">
                        <label>Interview Date *</label>
                        <input type="date" id="interview-date">
                    </div>
                    
                    <div class="form-group">
                        <label>Interview Time *</label>
                        <input type="time" id="interview-time" value="10:00">
                    </div>
                    
                    <div class="form-group">
                        <label>Interview Location/Platform *</label>
                        <input type="text" id="interview-location" placeholder="e.g., Office, Zoom, Google Meet" value="ALORICA Main Office, Clark, Pampanga">
                    </div>
                    
                    <div class="form-group">
                        <label>Interview Type</label>
                        <select id="interview-type">
                            <option value="phone">Phone Interview</option>
                            <option value="video" selected>Video Interview</option>
                            <option value="in-person">In-Person Interview</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Additional Details</label>
                        <textarea id="interview-details" rows="4" placeholder="Any additional information for the applicant">Please bring a valid ID and your resume. The interview will be conducted by our HR Manager, Ms. Garcia. If you have any questions, feel free to contact us at +63 45 123 4567.</textarea>
                    </div>
                </div>
                
                <div class="sms-preview" id="sms-preview">
                    <h4>SMS Preview:</h4>
                    <p id="sms-content">Your interview details will appear here</p>
                </div>
                
                <div class="email-preview" id="email-preview" style="background: #f0f8ff; padding: 15px; border-radius: 8px; margin-top: 15px; border-left: 4px solid #4682b4;">
                    <h4>Email Preview:</h4>
                    <div id="email-content">Your email content will appear here</div>
                </div>
                
                <div id="integration-status"></div>
                
                <button class="view-btn" onclick="sendInterviewInvitation()">Send Interview Invitation</button>
                <button class="view-btn" style="background: #28a745; margin-top: 10px;" onclick="testRealSMS()">Test Real SMS (Twilio)</button>
                <button class="view-btn" style="background: #17a2b8; margin-top: 10px;" onclick="testRealEmail()">Test Real Email (EmailJS)</button>
            </div>
        </div>
        
        <!-- Rest of the HTML remains the same -->
    </div>
    
    <script>
        // Add these real integration functions to your existing JavaScript
        
        // Real SMS Integration using Twilio API
        async function sendRealSMS(phoneNumber, message) {
            // Twilio API credentials (you would get these from twilio.com)
            const accountSid = 'YOUR_TWILIO_ACCOUNT_SID';
            const authToken = 'YOUR_TWILIO_AUTH_TOKEN';
            const twilioPhoneNumber = 'YOUR_TWILIO_PHONE_NUMBER';
            
            // For security, in a real app, you would call your own backend
            // This frontend code is just for demonstration
            try {
                const response = await fetch('https://api.twilio.com/2010-04-01/Accounts/' + accountSid + '/Messages.json', {
                    method: 'POST',
                    headers: {
                        'Authorization': 'Basic ' + btoa(accountSid + ':' + authToken),
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: new URLSearchParams({
                        'To': phoneNumber,
                        'From': twilioPhoneNumber,
                        'Body': message
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('SMS sent successfully:', data);
                    return { success: true, data: data };
                } else {
                    console.error('SMS sending failed:', response.status);
                    return { success: false, error: 'Failed to send SMS' };
                }
            } catch (error) {
                console.error('Error sending SMS:', error);
                return { success: false, error: error.message };
            }
        }
        
        // Real Email Integration using EmailJS
        async function sendRealEmail(email, subject, message) {
            // EmailJS credentials (you would get these from emailjs.com)
            const serviceID = 'YOUR_EMAILJS_SERVICE_ID';
            const templateID = 'YOUR_EMAILJS_TEMPLATE_ID';
            const userID = 'YOUR_EMAILJS_USER_ID';
            
            try {
                // Load EmailJS library dynamically
                if (typeof emailjs === 'undefined') {
                    await loadScript('https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js');
                }
                
                // Initialize EmailJS
                emailjs.init(userID);
                
                const templateParams = {
                    to_email: email,
                    subject: subject,
                    message: message,
                    from_name: 'Employment Corner',
                    to_name: document.getElementById('interview-applicant').value
                };
                
                const response = await emailjs.send(serviceID, templateID, templateParams);
                console.log('Email sent successfully:', response);
                return { success: true, data: response };
            } catch (error) {
                console.error('Error sending email:', error);
                return { success: false, error: error.message };
            }
        }
        
        // Function to load external scripts
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }
        
        // Test Real SMS Function
        async function testRealSMS() {
            const phoneNumber = document.getElementById('interview-phone').value;
            const message = document.getElementById('sms-content').textContent;
            
            if (!phoneNumber) {
                alert('Please enter a phone number');
                return;
            }
            
            // Validate Philippine phone number format
            const phoneRegex = /^\+63[0-9]{10}$/;
            if (!phoneRegex.test(phoneNumber)) {
                alert('Please enter a valid Philippine phone number in format: +63XXXXXXXXXX');
                return;
            }
            
            integrationStatus.innerHTML = '<div class="integration-status integration-loading">Sending real SMS via Twilio...</div>';
            
            try {
                // For demo purposes, we'll simulate the API call
                // In a real implementation, you would use the sendRealSMS function above
                
                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Check if we have demo credentials
                const hasCredentials = false; // Set to true when you add real credentials
                
                if (hasCredentials) {
                    const result = await sendRealSMS(phoneNumber, message);
                    if (result.success) {
                        integrationStatus.innerHTML = '<div class="integration-status integration-success">SMS sent successfully to ' + phoneNumber + '!</div>';
                    } else {
                        integrationStatus.innerHTML = '<div class="integration-status integration-error">Failed to send SMS: ' + result.error + '</div>';
                    }
                } else {
                    // Demo mode - show what would happen
                    integrationStatus.innerHTML = '<div class="integration-status integration-success">DEMO: SMS would be sent to ' + phoneNumber + ' via Twilio</div>';
                    console.log('DEMO SMS Details:');
                    console.log('To:', phoneNumber);
                    console.log('Message:', message);
                    console.log('To set up real SMS:');
                    console.log('1. Sign up at twilio.com');
                    console.log('2. Get your Account SID and Auth Token');
                    console.log('3. Purchase a phone number');
                    console.log('4. Update the sendRealSMS function with your credentials');
                }
            } catch (error) {
                integrationStatus.innerHTML = '<div class="integration-status integration-error">Error: ' + error.message + '</div>';
            }
        }
        
        // Test Real Email Function
        async function testRealEmail() {
            const email = document.getElementById('interview-email').value;
            const subject = 'Interview Invitation - Employment Corner';
            const message = document.getElementById('email-content').innerHTML;
            
            if (!email) {
                alert('Please enter an email address');
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address');
                return;
            }
            
            integrationStatus.innerHTML = '<div class="integration-status integration-loading">Sending real email via EmailJS...</div>';
            
            try {
                // For demo purposes, we'll simulate the API call
                // In a real implementation, you would use the sendRealEmail function above
                
                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Check if we have demo credentials
                const hasCredentials = false; // Set to true when you add real credentials
                
                if (hasCredentials) {
                    const result = await sendRealEmail(email, subject, message);
                    if (result.success) {
                        integrationStatus.innerHTML = '<div class="integration-status integration-success">Email sent successfully to ' + email + '!</div>';
                    } else {
                        integrationStatus.innerHTML = '<div class="integration-status integration-error">Failed to send email: ' + result.error + '</div>';
                    }
                } else {
                    // Demo mode - show what would happen
                    integrationStatus.innerHTML = '<div class="integration-status integration-success">DEMO: Email would be sent to ' + email + ' via EmailJS</div>';
                    console.log('DEMO Email Details:');
                    console.log('To:', email);
                    console.log('Subject:', subject);
                    console.log('Message:', message);
                    console.log('To set up real emails:');
                    console.log('1. Sign up at emailjs.com');
                    console.log('2. Create an email service and template');
                    console.log('3. Get your Service ID, Template ID, and User ID');
                    console.log('4. Update the sendRealEmail function with your credentials');
                }
            } catch (error) {
                integrationStatus.innerHTML = '<div class="integration-status integration-error">Error: ' + error.message + '</div>';
            }
        }
        
        // Enhanced sendInterviewInvitation function
        async function sendInterviewInvitation() {
            const applicantName = document.getElementById('interview-applicant').value;
            const phoneNumber = document.getElementById('interview-phone').value;
            const email = document.getElementById('interview-email').value;
            const date = document.getElementById('interview-date').value;
            const time = document.getElementById('interview-time').value;
            const location = document.getElementById('interview-location').value;
            const interviewType = document.getElementById('interview-type').value;
            const details = document.getElementById('interview-details').value;
            
            // Validation
            if (!phoneNumber || !email || !date || !time || !location) {
                alert('Please fill in all required fields marked with *');
                return;
            }
            
            // Validate phone number
            const phoneRegex = /^\+63[0-9]{10}$/;
            if (!phoneRegex.test(phoneNumber)) {
                alert('Please enter a valid Philippine phone number in format: +63XXXXXXXXXX');
                return;
            }
            
            // Validate email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address');
                return;
            }
            
            integrationStatus.innerHTML = '<div class="integration-status integration-loading">Sending interview invitation...</div>';
            
            try {
                // For now, we'll use the demo mode
                // In production, you would call the real functions
                
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                integrationStatus.innerHTML = '<div class="integration-status integration-success">' +
                    'Invitation prepared for:<br>' +
                    'SMS: ' + phoneNumber + '<br>' +
                    'Email: ' + email + '<br><br>' +
                    '<em>Use the "Test Real SMS" and "Test Real Email" buttons to actually send messages once you set up API credentials.</em>' +
                    '</div>';
                
                console.log('Interview invitation details:');
                console.log('Applicant:', applicantName);
                console.log('Phone:', phoneNumber);
                console.log('Email:', email);
                console.log('Date:', date);
                console.log('Time:', time);
                console.log('Location:', location);
                console.log('Type:', interviewType);
                console.log('Details:', details);
                
            } catch (error) {
                integrationStatus.innerHTML = '<div class="integration-status integration-error">Error: ' + error.message + '</div>';
            }
        }
        
        // Update the SMS preview function to also update email preview
        function updateSmsPreview() {
            const applicantName = document.getElementById('interview-applicant').value;
            const date = document.getElementById('interview-date').value;
            const time = document.getElementById('interview-time').value;
            const location = document.getElementById('interview-location').value;
            const interviewType = document.getElementById('interview-type').value;
            const details = document.getElementById('interview-details').value;
            
            const formattedDate = new Date(date).toLocaleDateString('en-PH', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // SMS Content
            let smsContent = `Hello ${applicantName}, you have been scheduled for a ${interviewType} interview on ${formattedDate} at ${time}.`;
            
            if (location) {
                smsContent += ` Location: ${location}.`;
            }
            
            if (details) {
                smsContent += ` ${details}`;
            }
            
            smsContent += " Please confirm your attendance. Thank you! - Employment Corner";
            
            document.getElementById('sms-content').textContent = smsContent;
            
            // Email Content
            let emailContent = `
                <div style="font-family: Arial, sans-serif; max-width: 600px;">
                    <h2 style="color: #225dff;">Interview Invitation</h2>
                    <p>Dear <strong>${applicantName}</strong>,</p>
                    
                    <p>You have been scheduled for a <strong>${interviewType} interview</strong> with our company.</p>
                    
                    <div style="background: #f9f9f9; padding: 15px; border-radius: 5px; margin: 15px 0;">
                        <h3 style="margin-top: 0;">Interview Details:</h3>
                        <p><strong>Date:</strong> ${formattedDate}</p>
                        <p><strong>Time:</strong> ${time}</p>
                        <p><strong>Location/Platform:</strong> ${location}</p>
                        <p><strong>Interview Type:</strong> ${interviewType}</p>
                    </div>
                    
                    ${details ? `<p><strong>Additional Information:</strong><br>${details}</p>` : ''}
                    
                    <p>Please confirm your attendance by replying to this email or contacting us at +63 45 123 4567.</p>
                    
                    <p>We look forward to speaking with you!</p>
                    
                    <p>Best regards,<br>
                    <strong>Employment Corner Team</strong><br>
                    recruitment@employmentcorner.com<br>
                    +63 45 123 4567</p>
                </div>
            `;
            
            document.getElementById('email-content').innerHTML = emailContent;
        }
        
        // Update event listeners to include email preview
        document.getElementById('interview-date').addEventListener('change', updateSmsPreview);
        document.getElementById('interview-time').addEventListener('change', updateSmsPreview);
        document.getElementById('interview-location').addEventListener('input', updateSmsPreview);
        document.getElementById('interview-type').addEventListener('change', updateSmsPreview);
        document.getElementById('interview-details').addEventListener('input', updateSmsPreview);
        document.getElementById('interview-phone').addEventListener('input', updateSmsPreview);
        document.getElementById('interview-applicant').addEventListener('input', updateSmsPreview);
        
        // Initialize the preview when page loads
        document.addEventListener('DOMContentLoaded', function() {
            updateSmsPreview();
        });
    </script>
</body>
</html>